- name: yum-clean-all
  command: yum clean all
  args:
    warn: no
  when: ansible_os_family == "RedHat"
  become: yes

- name: reload systemd
  systemd:
    daemon_reload: yes
  become: yes

- name: restart connect distributed
  systemd:
    name: "{{ kafka.connect.distributed.service_name }}"
    state: restarted
  become: yes

- name: restart control center
  systemd:
    name: "{{ confluent.control.center.service_name }}"
    state: restarted
  become: yes

- name: restart kafka
  systemd:
    name: "{{ broker.service_name }}"
    state: restarted
  become: yes

- name: restart kafka broker with daemon_reload
  systemd:
    name: "{{ broker.service_name }}"
    state: restarted
    daemon_reload: yes
  become: yes

- name: restart kafka-rest
  systemd:
    name: "{{ kafkarest.service_name }}"
    state: restarted
  become: yes

- name: restart kafka-rest with daemon_reload
  systemd:
    name: "{{ kafkarest.service_name }}"
    state: restarted
    daemon_reload: yes
  become: yes

- name: restart ksql
  systemd:
    name: "{{ ksql.service_name }}"
    state: restarted
  become: yes

- name: restart schema-registry
  systemd:
    name: "{{ schema.registry.service_name }}"
    state: restarted
  become: yes

- name: restart zookeeper
  systemd:
    name: "{{ zookeeper.service_name }}"
    state: restarted
  become: yes

- name: restart zookeeper with daemon_reload
  systemd:
    name: "{{ zookeeper.service_name }}"
    state: restarted
    daemon_reload: yes
  become: yes
